

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>3.4. Convolution modes &#8212; Digital Signals Theory</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/jupyter-sphinx.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/mystnb.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="3.5. Properties of convolution" href="Properties.html" />
    <link rel="prev" title="3.3. Impulse Response" href="IR.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  <img src="../../_static/dstlogo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Digital Signals Theory</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Preface
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Part 1, Signals and systems
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../ch01-signals/Intro.html">
   1. Signals
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch02-sampling/intro.html">
   2. Digital sampling
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="reference internal" href="intro.html">
   3. Convolution
  </a>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="Building.html">
     3.1. Delay, gain, and mix
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Convolution.html">
     3.2. Defining convolution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="IR.html">
     3.3. Impulse Response
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     3.4. Convolution modes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Properties.html">
     3.5. Properties of convolution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="LSI.html">
     3.6. Linearity and Shift-invariance
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Exercises.html">
     3.7. Exercises
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Part 2, The frequency domain
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../ch04-fourier/intro.html">
   1. The Discrete Fourier Transform
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch05-dft-properties/intro.html">
   2. Properties of the DFT
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch06-inverse-dft/intro.html">
   3. DFT Invertibility
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch07-fft/intro.html">
   4. Fast Fourier Transform
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch08-stft/intro.html">
   5. Time-frequency representation
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Part 3, Filtering
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../ch09-convtheorem/intro.html">
   1. Frequency domain convolution
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch10-iir/intro.html">
   2. Infinite impulse response filters
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Appendix
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/Fundamentals.html">
   1. Mathematical fundamentals
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/Complex.html">
   2. Complex numbers
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  References
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../zzzbibliography.html">
   1. References
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/content/ch03-convolution/Modes.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#full-mode">
   3.4.1. Full mode
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#valid-mode">
   3.4.2. Valid mode
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#same-mode">
   3.4.3. Same mode
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   3.4.4. Summary
  </a>
 </li>
</ul>

        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="convolution-modes">
<span id="id1"></span><h1><span class="section-number">3.4. </span>Convolution modes<a class="headerlink" href="#convolution-modes" title="Permalink to this headline">¶</a></h1>
<div class="cell tag_remove_input tag_remove_output docutils container">
</div>
<p>As we saw in the first section of this chapter, the first few samples produced by a convolution <span class="math notranslate nohighlight">\(y = x*h\)</span> depend on <em>negative sample indices</em> <span class="math notranslate nohighlight">\(x[n-k]\)</span> where <span class="math notranslate nohighlight">\(n &lt; k\)</span>.
To ensure that the convolution is well-defined for these indices, we assume <span class="math notranslate nohighlight">\(x[n-k]=0\)</span> for <span class="math notranslate nohighlight">\(n&lt;k &lt; K\)</span> (the length of the filter), which we may also think of as <strong>padding</strong> the signal with zeros on the left.
This means that we can think of the first <span class="math notranslate nohighlight">\(k\)</span> samples of <span class="math notranslate nohighlight">\(y\)</span> as depending on these additional zeros.  Any sample <span class="math notranslate nohighlight">\(n \geq k\)</span> will not depend on this padding.</p>
<p>Depending on how you want to use convolution, it may or may not be appropriate to include these first few samples.
In this section, we’ll describe different commonly used <strong>modes</strong> of convolution, which can all be implemented by some combination of padding and trimming the inputs and outputs.
Note that these modes do not fundamentally alter how convolution works: all that changes is which outputs are retained in the output signal.</p>
<p>Throughout this section, we will assume that <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(h\)</span> have <span class="math notranslate nohighlight">\(N\)</span> and <span class="math notranslate nohighlight">\(K\)</span> samples, respectively, and that <span class="math notranslate nohighlight">\(N \geq K\)</span>.
This latter assumption is for convenience, and as we’ll see in the next section, it is not necessary.</p>
<div class="section" id="full-mode">
<h2><span class="section-number">3.4.1. </span>Full mode<a class="headerlink" href="#full-mode" title="Permalink to this headline">¶</a></h2>
<p><strong>Full mode</strong> convolution is implemented by padding the input on both the left <em>and the right</em> by <span class="math notranslate nohighlight">\(K-1\)</span> samples each.
A full mode convolution will have <span class="math notranslate nohighlight">\(N + K - 1\)</span> output samples.</p>
<p>The intuition for this is that it captures both a <em>warm up</em> phase (<span class="math notranslate nohighlight">\(n &lt; K\)</span>), as well as a <em>ringing out</em> phase (<span class="math notranslate nohighlight">\(N \leq n &lt; N + K\)</span>).
The warm up phase contains all outputs which depend on some (but not only) prepended silence, the ringing out phase similarly contains outputs which depend on some (but not only) appended silence.</p>
<p>These effects can be seen in the example below, where we compute a full convolution between an increasing sequence <span class="math notranslate nohighlight">\([5, 6, 7, 8, 9]\)</span> and a differencing filter <span class="math notranslate nohighlight">\([1, 0, -1]\)</span>.
With this example, we’ll have <span class="math notranslate nohighlight">\(y[n] = x[n] - x[n-2]\)</span> in general, which will be the constant 2 for this sequence.
However, at the beginning and end, you can see the effects of left- and right-padding by zeros.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Full mode example</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="c1"># This is a differencing filter:</span>
<span class="c1">#   y[n] = x[n] - x[n-2]</span>
<span class="n">h</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>

<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;full&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Input:</span><span class="se">\t\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Filter:</span><span class="se">\t\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Full convolution:</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>Input:		 [5 6 7 8 9]
Filter:		 [ 1  0 -1]
Full convolution:	 [ 5  6  2  2  2 -8 -9]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="valid-mode">
<h2><span class="section-number">3.4.2. </span>Valid mode<a class="headerlink" href="#valid-mode" title="Permalink to this headline">¶</a></h2>
<p><strong>Valid mode</strong> convolution eliminates any outputs that depend on padding at all.
If we start from the <strong>full mode</strong> convolution described above, the <em>valid</em> outputs are the middle 3, because they depend only on values explicitly observed in the input: <span class="math notranslate nohighlight">\(7-5\)</span>, <span class="math notranslate nohighlight">\(8-6\)</span>, and <span class="math notranslate nohighlight">\(9-7\)</span>.</p>
<p>A valid mode convolution will have <span class="math notranslate nohighlight">\(N - K + 1\)</span> output samples.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;valid&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Input:</span><span class="se">\t\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Filter:</span><span class="se">\t\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Valid convolution:</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>Input:		 [5 6 7 8 9]
Filter:		 [ 1  0 -1]
Valid convolution:	 [2 2 2]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="same-mode">
<h2><span class="section-number">3.4.3. </span>Same mode<a class="headerlink" href="#same-mode" title="Permalink to this headline">¶</a></h2>
<p><strong>Same mode</strong> is derived from <strong>full mode</strong> by extracting <span class="math notranslate nohighlight">\(N\)</span> samples from the full convolution, so that
the output <span class="math notranslate nohighlight">\(y\)</span> has the <em>same length</em> <span class="math notranslate nohighlight">\(N\)</span> as <span class="math notranslate nohighlight">\(x\)</span>.
Most implementations of <strong>same mode</strong> extract the <em>middle</em> of the output, so that both the first and last <span class="math notranslate nohighlight">\(K/2\)</span> samples depend on zero padding, as demonstrated below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;same&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Input:</span><span class="se">\t\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Filter:</span><span class="se">\t\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Same convolution:</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>Input:		 [5 6 7 8 9]
Filter:		 [ 1  0 -1]
Same convolution:	 [ 6  2  2  2 -8]
</pre></div>
</div>
</div>
</div>
<p>Sometimes, you may want a left-aligned (or right-aligned) same-mode convolution, including the warm-up but not ring-out (or vice versa).
These can be helpful if you want to introduce a delay effect to a signal, but retain its length.
While the standard implementation used above does not do this, it’s easy enough to construct by trimming the full mode convolution differently:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Include only the warm-up phase</span>
<span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;full&#39;</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">[:</span><span class="n">N</span><span class="p">]</span>  <span class="c1"># Truncate to the first N samples</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Input:</span><span class="se">\t\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Filter:</span><span class="se">\t\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Same (left-align):</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>Input:		 [5 6 7 8 9]
Filter:		 [ 1  0 -1]
Same (left-align):	 [5 6 2 2 2]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Discard the warm-up, but include the ring-out</span>
<span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;full&#39;</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="o">-</span><span class="n">N</span><span class="p">:]</span>  <span class="c1"># Truncate to the last N samples</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Input:</span><span class="se">\t\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Filter:</span><span class="se">\t\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Same (right-align):</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>Input:		 [5 6 7 8 9]
Filter:		 [ 1  0 -1]
Same (right-align):	 [ 2  2  2 -8 -9]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="summary">
<h2><span class="section-number">3.4.4. </span>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>The different convolution modes are summarized visually below, with <span class="math notranslate nohighlight">\(h\)</span> as the differencing filter used above, and <span class="math notranslate nohighlight">\(x\)</span> now as a square wave over 25 samples.</p>
<p>The shaded regions of the bottom subplot correspond to those which depend on zero-padding.</p>
<div class="cell tag_hide_input tag_remove_input tag_remove_output docutils container">
</div>
<div class="figure align-default" id="id2">
<div class="cell_output docutils container">
<img alt="../../_images/Modes_13_0.svg" src="../../_images/Modes_13_0.svg" /></div>
<p class="caption"><span class="caption-number">Fig. 3.7 </span><span class="caption-text">Top-left: an input signal <span class="math notranslate nohighlight">\(x[n]\)</span>.
Top-right: the coefficients of a filter <span class="math notranslate nohighlight">\(h[k]\)</span>.
Bottom: The full convolution <span class="math notranslate nohighlight">\(y = h * x\)</span> (dots) can be trimmed in various ways to produce each of the different convolution modes.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>The table below provides a rubric for deriving the different convolution modes from <strong>full</strong> mode in Python.
For each mode, the length of the output signal is listed, as well as the <em>slice notation</em> for finding the different mode outputs within the <code class="docutils literal notranslate"><span class="pre">full</span></code> convolution.</p>
<p>In this table, we’ve assumed that <span class="math notranslate nohighlight">\(N \geq K \geq 1\)</span>.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Mode</p></th>
<th class="text-align:center head"><p>Length</p></th>
<th class="text-align:center head"><p>Slice</p></th>
<th class="text-align:left head"><p>Code</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Full</p></td>
<td class="text-align:center"><p><span class="math notranslate nohighlight">\({N+K-1}\)</span></p></td>
<td class="text-align:center"><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">:</span> <span class="pre">N</span> <span class="pre">+</span> <span class="pre">K</span> <span class="pre">-</span> <span class="pre">1</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">np.convolve(x,</span> <span class="pre">h,</span> <span class="pre">mode='full')</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Valid</p></td>
<td class="text-align:center"><p><span class="math notranslate nohighlight">\({N-K+1}\)</span></p></td>
<td class="text-align:center"><p><code class="docutils literal notranslate"><span class="pre">K</span> <span class="pre">:</span> <span class="pre">N</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">np.convolve(x,</span> <span class="pre">h,</span> <span class="pre">mode='valid')</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Same (left)</p></td>
<td class="text-align:center"><p><span class="math notranslate nohighlight">\(N\)</span></p></td>
<td class="text-align:center"><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">:</span> <span class="pre">N</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">np.convolve(x,</span> <span class="pre">h,</span> <span class="pre">mode='full')[:N]</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Same (centered)</p></td>
<td class="text-align:center"><p><span class="math notranslate nohighlight">\(N\)</span></p></td>
<td class="text-align:center"><p><code class="docutils literal notranslate"><span class="pre">(K-1)//2</span> <span class="pre">:</span> <span class="pre">N</span> <span class="pre">+</span> <span class="pre">(K-1)//2</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">np.convolve(x,</span> <span class="pre">h,</span> <span class="pre">mode='same')</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Same (right)</p></td>
<td class="text-align:center"><p><span class="math notranslate nohighlight">\(N\)</span></p></td>
<td class="text-align:center"><p><code class="docutils literal notranslate"><span class="pre">K</span> <span class="pre">-1</span> <span class="pre">:</span> <span class="pre">N</span> <span class="pre">+</span> <span class="pre">K-1</span></code></p></td>
<td class="text-align:left"><p><code class="docutils literal notranslate"><span class="pre">np.convolve(x,</span> <span class="pre">h,</span> <span class="pre">mode='full')[K-1:]</span></code></p></td>
</tr>
</tbody>
</table>
<p>Remember that array slices in Python do not include the upper limit.
For example, <code class="docutils literal notranslate"><span class="pre">x[K:N]</span></code> denotes indices <code class="docutils literal notranslate"><span class="pre">x[K],</span> <span class="pre">x[K+1],</span> <span class="pre">x[K+2],</span> <span class="pre">...,</span> <span class="pre">x[N-1]</span></code>.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "bloody"
        },
        kernelOptions: {
            kernelName: "bloody",
            path: "./content/ch03-convolution"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'bloody'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="IR.html" title="previous page"><span class="section-number">3.3. </span>Impulse Response</a>
    <a class='right-next' id="next-link" href="Properties.html" title="next page"><span class="section-number">3.5. </span>Properties of convolution</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Brian McFee<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../../_static/js/index.js"></script>
    
    <!-- Google Analytics -->
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-89057641-1', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>
    <script async src='https://www.google-analytics.com/analytics.js'></script>
    <!-- End Google Analytics -->
    
  </body>
</html>